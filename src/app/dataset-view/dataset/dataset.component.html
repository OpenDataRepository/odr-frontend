<div class="ion-margin border">
  <ion-item lines="inset">
    <ion-label>uuid: {{ dataset.dataset_uuid }}</ion-label>
    <ion-button *ngIf="public" slot="end" color="success" disabled="true">Public</ion-button>
    <ion-button *ngIf="!public" slot="end" color="danger" disabled="true">Private</ion-button>
  </ion-item>
  <div *ngIf="public || hasViewPermission">
    <ion-item lines="inset">
      <ion-label>Name: {{ dataset.name }}</ion-label>
    </ion-item>
    <div *ngIf="this.persisted">
      <ion-item lines="inset">
        <ion-label>version id: {{ dataset.dataset_id }}</ion-label>
      </ion-item>
      <ion-item lines="inset">
        <ion-label>version save date: {{ dataset.dataset_persist_date }}</ion-label>
      </ion-item>
    </div>

    <ion-item lines="none">Fields:</ion-item>
    <div class="ion-margin">
      <div *ngFor="let f of dataset?.fields">
        <div class="ion-margin border">
          <ion-item lines="inset">
            <ion-label>uuid: {{ f.uuid }}</ion-label>
            <ion-button *ngIf="f.public_date" slot="end" color="success" disabled="true">Public</ion-button>
            <ion-button *ngIf="!f.public_date" slot="end" color="danger" disabled="true">Private</ion-button>
          </ion-item>
          <div *ngIf="f.public_date || f.updated_at">
            <ion-item lines="inset">
              <ion-label>Name: {{ f.name }}</ion-label>
            </ion-item>
            <ion-item lines="inset">
              <ion-label>Description: {{ f.description }}</ion-label>
            </ion-item>
            <ion-item lines="inset" *ngIf="f.type">
              <ion-label>Type: {{ f.type }}</ion-label>
            </ion-item>
            <ion-item lines="none">Plugins: </ion-item>
            <ion-list>
              <div *ngFor="let plugin_name of f.plugins.keys" class="ion-margin border">
                <ion-item><ion-label>Name: {{plugin_name}}</ion-label></ion-item>
                <ion-item><ion-label>Version: {{f.plugins.get(plugin_name).version}}</ion-label></ion-item>
                <div *ngIf="f.plugins.get(plugin_name).options">
                  <ion-item><ion-label>Options: </ion-label></ion-item>
                  <ion-list class="ion-margin">
                    <ion-item lines="inset" *ngFor="let plugin_option_name of objectKeys(f.plugins.get(plugin_name).options)" [detail]="false">
                      <ion-label>{{ plugin_option_name }} : {{ f.plugins.get(plugin_name).options[plugin_option_name] }}</ion-label>
                    </ion-item>
                  </ion-list>
                </div>
              </div>
            </ion-list>
          </div>
        </div>
      </div>
    </div>

    <ion-item lines="none">Plugins: </ion-item>
    <ion-list class="ion-margin">
      <ion-item *ngFor="let plugin_name of dataset.plugins.keys">
        <ion-label>{{plugin_name}} v{{dataset.plugins.get(plugin_name)}}</ion-label>
      </ion-item>
    </ion-list>

    <ion-item lines="none">Related Datasets:</ion-item>
    <div class="ion-margin">
      <div *ngFor="let d of dataset?.related_datasets">
        <dataset-view [dataset]="d"></dataset-view>
      </div>
    </div>

  </div>
</div>
